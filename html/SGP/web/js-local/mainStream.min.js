!function(t){var e=null,n={config:{backState:"http://192.168.56.100/ffmpeg/stateBack.php",recAction:"../php/Control.php",recState:"../php/FrontController.php?StateRecord",rtmpHost:"rtmp://192.168.56.100:1935/hls/movie",width:"800",height:"450"},vars:{},init:function(){e=this,e.ui.getElements(),e.actions.modPlayEvent(),e.ui.setEvents(),setInterval(e.ui.handlers.controlState,1e4),e.ui.handlers.controlState()},ui:{elements:{statusConnection:void 0,statusStream:void 0,recButton:void 0},setEvents:function(){e.ui.handlers.onLoadPlayer(),e.ui.elements.recButton.click(e.ui.handlers.onRecButton)},getElements:function(){e.ui.elements.statusConnection=$("#statusConnection"),e.ui.elements.recButton=$("#recButton"),e.ui.elements.statusStream=$("#statusStream")},handlers:{onLoadPlayer:function(){prontusPlayer.mediaController.install({player:{adEnable:!1,autoPlay:!1,image:"",width:e.config.width,height:e.config.height,forceSize:!0,delay:0},mediaSrc:{defaultSrc:e.config.rtmpHost,onErrorSrc:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"},contentId:"prontusPlayer",stats:{enable:!0}})},controlState:function(){e.actions.stateBack(),e.actions.StateRecord()},onRecButton:function(){e.actions.callRecAction()}}},actions:{stateBack:function(){$.ajax({url:e.config.backState,type:"GET",dataType:"jsonp",jsonp:"state",success:function(t){e.callbacks.stateBackCallback(t)},error:function(t){console.log(t)}})},StateRecord:function(){var t;$.ajax({url:e.config.recState,success:function(n){t=JSON.parse(n),e.callbacks.stateRecState(t)},error:function(t){console.log(t)}})},callRecAction:function(){$.ajax({url:e.config.recAction+"?start",dataType:"json",cache:!1,success:function(t){console.log(t)},error:function(){}})},modPlayEvent:function(){void 0!==prontusPlayer&&(prontusPlayer.statsController.send=function(t,e,a){prontusPlayer.helper.parseBoolean(e.enable)&&("timePlayed"===t&&(e.timePlayed+=a),"play"!==t||e.start||(t="start",e.start=!0,n.actions.showRecbutton()),prontusPlayer.helper.parseBoolean(e.sst.enable)&&!prontusPlayer.helper.isEmpty(e.sst.events[t])&&prontusPlayer.statsController.sendSst(t,e),prontusPlayer.helper.parseBoolean(e.analytics.enable)&&!prontusPlayer.helper.isEmpty(e.analytics.events[t])&&prontusPlayer.statsController.sendAnalytics(e.analytics.events[t],e.analytics,a))})},showRecbutton:function(){e.ui.elements.recButton.fadeIn()}},callbacks:{stateBackCallback:function(t){"true"===t.stream?(e.ui.elements.statusConnection.removeClass().addClass("green"),e.ui.elements.statusConnection.html("Conectado")):(e.ui.elements.statusConnection.removeClass().addClass("grey"),e.ui.elements.statusConnection.html("No Conectado"))},stateRecState:function(t){"true"===t.record?e.ui.elements.statusStream.fadeIn():e.ui.elements.statusStream.fadeOut()}}};t.mainStream=n}(window);